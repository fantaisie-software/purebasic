<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="Fantaisie Software">
<link rel="icon" type="image/png" href="https://www.purebasic.com/img/favicon.png">
<title>PureBasic Library SDK</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>PureBasic Library SDK</h1>
<div class="details">
<span id="author" class="author">Fantaisie Software</span><br>
<span id="email" class="email"><a href="mailto:support@purebasic.com">support@purebasic.com</a></span><br>
<span id="revdate">2021-02-23</span>
<br><span id="revremark">PureBasic v5.10</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_asm_versus_c">2. ASM versus C</a></li>
<li><a href="#_using_visual_c_to_develop_purelibraries">3. Using Visual C++ to Develop PureLibraries</a></li>
<li><a href="#_using_fasm">4. Using FAsm</a></li>
<li><a href="#_building_the_final_purelibrary">5. Building the Final PureLibrary</a>
<ul class="sectlevel2">
<li><a href="#_basic_example">Basic Example</a></li>
<li><a href="#_examples_of_variable_parameters">Examples of Variable Parameters</a>
<ul class="sectlevel3">
<li><a href="#_one_two_or_tree_parameters">One, Two or Tree Parameters</a></li>
<li><a href="#_one_or_tree_parameters">One or Tree Parameters</a></li>
</ul>
</li>
<li><a href="#_advanced_flags">Advanced Flags</a></li>
<li><a href="#_conditional_directives">Conditional Directives</a></li>
</ul>
</li>
<li><a href="#_mmx_3dnow_sse_and_sse2">6. MMX, 3DNow, SSE and SSE2</a></li>
<li><a href="#_managing_strings">7. Managing Strings</a></li>
<li><a href="#_splitted_library_format">8. Splitted Library Format</a></li>
<li><a href="#_command_line_options">9. Command-Line Options</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<!--
*******************************************************************************
* DON'T EDIT THIS DOCUMENT!!! This HTML document was generated from AsciiDoc. *
* If you want to contribute changes, submit them to its AsciiDoc source at:   *
*                                                                             *
* https://github.com/fantaisie-software/purebasic/tree/master/AsciiDoc/       *
*******************************************************************************
-->
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>PureBasic is a complete programming language which uses third parts libraries (called &#8216;PureLibraries&#8217; to avoid conflicts with systems libraries) to ease programmers' life.
These libraries can be written in ASM (with NAsm, FAsm, etc.) or in C (with VisualC++, etc.).</p>
</div>
<div class="paragraph">
<p>You must consider than a library could be used by every program, so it has to be optimized as much as possible.
If a library is well written, every PureBasic program which uses it will benefit from its compactness and speed.</p>
</div>
<div class="paragraph">
<p>Some examples are available in the <code>VisualC</code> subfolder, so be sure to check them, it&#8217;s often easier to learn from working examples.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asm_versus_c"><a class="anchor" href="#_asm_versus_c"></a>2. ASM versus C</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you don&#8217;t know how to code in ASM or don&#8217;t want code your library in ASM, you can skip this part.
A library fully written in ASM has an advantage over one written in C: the first parameter is passed trough a register (<code>eax</code>) instead of the stack.
This means it&#8217;s a faster, especially in case of a small function.
Apart from this, all the rest is similar.</p>
</div>
<div class="paragraph">
<p>Programming in ASM allows some tricks/optimizations which aren&#8217;t possible in C (i.e. full access to FPU, MMX and SSE specific commands, etc.).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_visual_c_to_develop_purelibraries"><a class="anchor" href="#_using_visual_c_to_develop_purelibraries"></a>3. Using Visual C++ to Develop PureLibraries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, you have to get a recent version VisualC++ (we use the 2010 edition).
An Express Edition is available at no cost from Microsoft.
For more information about using VisualC for user libraries, check the <code>VisualC</code> example folder.</p>
</div>
<div class="paragraph">
<p>General notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A PureFunction name declaration begins always by <code>PB_</code> (ex: <code>PB_Right</code>, <code>PB_Left</code>, &#8230;&#8203;).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_fasm"><a class="anchor" href="#_using_fasm"></a>4. Using FAsm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s easier, since FAsm is used by PureBasic, so you could just grab it from the <code>\Compilers\</code> directory.
Try to compile the <code>FAsm\MessageBox.asm</code> file by typing:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fasm MessageBox.asm MessageBox.obj</pre>
</div>
</div>
<div class="paragraph">
<p>General notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only the registers <code>eax</code>, <code>edx</code> and <code>ecx</code> can be destroyed, all others must be preserved.</p>
</li>
<li>
<p>A PureFunction name declaration begin always by <code>PB_</code> (ex: <code>PB_Right</code>, <code>PB_Left</code>, &#8230;&#8203;).</p>
</li>
<li>
<p>The first parameter is passed via the <code>eax</code> register, all others are on the stack.</p>
</li>
<li>
<p>If Float is used on the first parameter, it&#8217;s not passed on <code>eax</code> but on <code>ST0</code> (first FPU register).</p>
</li>
<li>
<p>A Float or Double result must be put on <code>ST0</code>.</p>
</li>
<li>
<p>A Quad result has to be put in <code>eax</code> (low word) and <code>edx</code> (high word).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A file called <code>Win32N.inc</code> is supplied with PureBasic (by Tamas Kaproncai &lt;<a href="mailto:tomcat@szif.hu">tomcat@szif.hu</a>&gt;) which contains almost all the needed constants and structures to develop on the Win32 environment.</p>
</div>
<div class="paragraph">
<p>The full version of FAsm (with the help) can be found at:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://flatassembler.net" class="bare" target="_blank" rel="noopener">https://flatassembler.net</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_the_final_purelibrary"><a class="anchor" href="#_building_the_final_purelibrary"></a>5. Building the Final PureLibrary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The commands available in a PureLibrary are described in a file, called <code>LibraryName.Desc</code>.
Inside, you can put every commands, which language you&#8217;ve used to code your library, and more.
Every line beginning by a semi-column <code>;</code> is considered a comment (like in PureBasic).</p>
</div>
<div class="sect2">
<h3 id="_basic_example"><a class="anchor" href="#_basic_example"></a>Basic Example</h3>
<div class="literalblock">
<div class="content">
<pre>;
; Language used to code the library: ASM or C
ASM
;
; Number of Windows DLLs than the library need
2
WINMM
ODBC32
;
; Library type (Can be OBJ or LIB). Starting with 2.60, PureBasic can use both .obj (NAsm or LccWin32)
; and standard Windows .LIB file, useful to convert quickly a library. This should be mostly .obj
; here, instead you're really need to use a .lib.
;
OBJ
;
; Number of PureBasic library needed by the library. Here we need the Gadget library
;
1
Gadget
; Help directory name. Useful when doing an extension of a library and want to put
; the help file in the same directory than the base library. This is not a facultative
; result.
;
GadgetSlider
;
; Library functions:
;
; FunctionName, Arg1Type, Arg2Type, ... (DescriptionArg1, Arg2) - Description of the command show on the QuickHelp status bar
; Return type
;</pre>
</div>
</div>
<div class="paragraph">
<p>The final sample:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ASM
0
OBJ
0
Misc
;
; Misc library descriptor
;
;
InitMisc
InitFunction
;
FreeMiscs
EndFunction
;
PeekS, Long (Address) - Retrieve a string from the specified address
String
;
PeekL, Long (Address) - Retrieve a long from the specified address
Long | DebuggerCheck</pre>
</div>
</div>
<div class="paragraph">
<p>Possible parameter type (only one parameter type can be put at once):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Byte</code>&#8201;&#8212;&#8201;The parameter will be a byte (1 byte).</p>
</li>
<li>
<p><code>Word</code>&#8201;&#8212;&#8201;The parameter will be a word (2 bytes).</p>
</li>
<li>
<p><code>Long</code>&#8201;&#8212;&#8201;The parameter will be a long (4 bytes).</p>
</li>
<li>
<p><code>String</code>&#8201;&#8212;&#8201;The parameter will be a string (see below for an explanation of string handling).</p>
</li>
<li>
<p><code>Quad</code>&#8201;&#8212;&#8201;The parameter will be a quad (8 bytes).</p>
</li>
<li>
<p><code>Float</code>&#8201;&#8212;&#8201;The parameter will be a float (4 bytes).</p>
</li>
<li>
<p><code>Double</code>&#8201;&#8212;&#8201;The parameter will be a double (8 bytes).</p>
</li>
<li>
<p><code>Any</code>&#8201;&#8212;&#8201;The parameter can be anything (the compiler won&#8217;t check the type).</p>
</li>
<li>
<p><code>Array</code>&#8201;&#8212;&#8201;The parameter will be an array. It will have to be passed like: <code>array()</code>.</p>
</li>
<li>
<p><code>LinkedList</code>&#8201;&#8212;&#8201;The parameter will be a linkedlist. It will have to be passed like: <code>list()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Possible return flags (flags can be combined with the <code>|</code> operand):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DebuggerCheck</code>&#8201;&#8212;&#8201;The command need a <code>PB_CommandName_DEBUG()</code> routine, which will be called before the call of the real command (when the debugger is on), useful to check if the parameters are correct.
This function should be put in a different file, to not be linked with the final executable.
You should put all the debug functions in the same file, to ease the management.
This function has to be declared CDECL.</p>
</li>
<li>
<p><code>Byte</code>&#8201;&#8212;&#8201;The return is a byte (1 byte).</p>
</li>
<li>
<p><code>Long</code>&#8201;&#8212;&#8201;The return is a long (4 bytes).</p>
</li>
<li>
<p><code>Float</code>&#8201;&#8212;&#8201;The return is a long (4 bytes).</p>
</li>
<li>
<p><code>Double</code>&#8201;&#8212;&#8201;The return is a double (8 bytes).</p>
</li>
<li>
<p><code>Quad</code>&#8201;&#8212;&#8201;The return is a quad (8 bytes).</p>
</li>
<li>
<p><code>String</code>&#8201;&#8212;&#8201;The return is a string (see below for an explanation of string handling).</p>
</li>
<li>
<p><code>None</code>&#8201;&#8212;&#8201;This function doesn&#8217;t return anything.</p>
</li>
<li>
<p><code>InitFunction</code>&#8201;&#8212;&#8201;The function is an &#8216;InitFunction&#8217; which will be called automatically when the program starts.
This function won&#8217;t appear in the available user command list.
This function can not have any parameters.
A debug function can be attached this function, if debugger specific code should be initialized once.</p>
</li>
<li>
<p><code>EndFunction</code>&#8201;&#8212;&#8201;The function is an &#8216;EndFunction&#8217; which will be called automatically when the program ends.
It&#8217;s very useful to clean up all the resources allocated by the library commands.</p>
</li>
<li>
<p><code>StdCall</code>&#8201;&#8212;&#8201;The function is truly stdcall.
It&#8217;s only useful for ASM library, to force the first parameter to pushed on the stack (instead of <code>eax</code>).</p>
</li>
<li>
<p><code>MMX</code>&#8201;&#8212;&#8201;Informs the compiler than this function has an MMX specific version (see below).</p>
</li>
<li>
<p><code>SSE</code>&#8201;&#8212;&#8201;Informs the compiler than this function has an SSE specific version (see below).</p>
</li>
<li>
<p><code>SSE2</code>&#8201;&#8212;&#8201;Informs the compiler than this function has an SSE2 specific version (see below).</p>
</li>
<li>
<p><code>3DNOW</code>&#8201;&#8212;&#8201;Informs the compiler than this function has an 3DNOW specific version (see below).</p>
</li>
<li>
<p><code>CDecl</code>&#8201;&#8212;&#8201;The function call will be CDecl, which means than it&#8217;s the compiler which will readjust the stack.</p>
</li>
<li>
<p><code>Virtual</code>&#8201;&#8212;&#8201;The function is not a real function, but a function pointer.
The compiler will make an indirect call by using the <code>PB_Command</code> label as a function pointer.
Can be useful to have a same function doing different operation depending of the context.</p>
</li>
<li>
<p><code>Thread</code>&#8201;&#8212;&#8201;Informs the compiler than this function has a THREAD specific version.
If the function needs to be tuned to be threadsafe, and the performance/size impact will be important, it&#8217;s advised to use this flag and create a function which will be used only when the executable will be thread safe (i.e. compiled with the <code>/THREAD</code> flag).
The command should be named <code>PB_CommandName_THREAD()</code>.</p>
</li>
<li>
<p><code>Unicode</code>&#8201;&#8212;&#8201;Informs the compiler than this function has an UNICODE specific version.
If the function returns a string or has some string parameter, it&#8217;s strongly recommended to use this flag and add the Unicode version so the command can be used in Unicode programs as well (else it will work in ASCII only).
The command should be named <code>PB_CommandName_UNICODE()</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If your command also has the <code>Thread</code> flag, you need to add another command name <code>PB_CommandName_THREAD_UNICODE()</code> which will be used if the program is compiled with the <code>/THREAD</code> and <code>/UNICODE</code> flags.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Assembly</code>&#8201;&#8212;&#8201;Tells than this function is written in assembly (so the first parameter is on <code>eax</code>, and the name decoration doesn&#8217;t have <code>@NbParams*4</code>).
This allow to mix assembly and C command in the same library.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_examples_of_variable_parameters"><a class="anchor" href="#_examples_of_variable_parameters"></a>Examples of Variable Parameters</h3>
<div class="sect3">
<h4 id="_one_two_or_tree_parameters"><a class="anchor" href="#_one_two_or_tree_parameters"></a>One, Two or Tree Parameters</h4>
<div class="literalblock">
<div class="content">
<pre>CustomBox, String, [Long], [Long], (Title$ [, Flags [, Hidden]]) - My Custom box
Long</pre>
</div>
</div>
<div class="paragraph">
<p>Now, you have to create 3 PB functions, named like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PB_CustomBox (char *String)</code></p>
</li>
<li>
<p><code>PB_CustomBox2(char *String, Long)</code></p>
</li>
<li>
<p><code>PB_CustomBox3(char *String, Long, Long)</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_one_or_tree_parameters"><a class="anchor" href="#_one_or_tree_parameters"></a>One or Tree Parameters</h4>
<div class="literalblock">
<div class="content">
<pre>CustomBox, String, [Long, Long], (Title$ [, Flags , Hidden]) - My Custom box
Long</pre>
</div>
</div>
<div class="paragraph">
<p>Now, you have to create 2 PB functions, named like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PB_CustomBox (char *String)</code></p>
</li>
<li>
<p><code>PB_CustomBox2(char *String, Long, Long)</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_flags"><a class="anchor" href="#_advanced_flags"></a>Advanced Flags</h3>
<div class="ulist">
<ul>
<li>
<p>Starting with PureBasic 3.50 it&#8217;s possible to force an asm procedure to be stdcall (i.e. last argument pushed on the stack, instead of in <code>eax</code>), by using the <code>StdCall</code> keyword in the return field.
This is very handy, especially for DLL wrapper.</p>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>MyDLLWrapper, Long, Long, () - My DLL wrapper
Long | StdCall</pre>
</div>
</div>
</li>
<li>
<p>It&#8217;s possible to put an <code>ANY</code> flag, instead of the <code>Long</code>, <code>Float</code>, etc. arguments type.
This mean that&#8217;s the last type which is used, without conversion.
For example, you can create a function which sometimes needs float, sometimes long, depending of the flags.
It&#8217;s used especially with the <code>CallFunction()</code> and <code>CallFunctionFast()</code> commands.</p>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>MySpecialFunction, Long, Any, (Flags, Float or Long or String)
Long</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once this file is finished, you have to mix the .obj with the .desc to produce a real PureLibrary.
To do this, copy the .desc and the .obj in the same directory and run the LibraryMaker tool.
Select this path as &#8216;Source Object Path&#8217; and a destination path.
If any errors are found, they will be signaled.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conditional_directives"><a class="anchor" href="#_conditional_directives"></a>Conditional Directives</h3>
<div class="paragraph">
<p>Since PureBasic is a cross-platform programming language it&#8217;s sometimes useful to use the same .desc file for several OSs.
In this case, it could have some minor changes to do to the .desc to fit the system rules. To do it, it&#8217;s possible to use <code>CompilerIf</code>/<code>CompilerElse</code>/<code>CompilerEndIf</code> directories, like in PureBasic.
The <code>/CONSTANT</code> command line flag will be used to declare the constants.
It&#8217;s possible to use several constants and to nest the statements.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlight"><code class="language-PureBasic" data-lang="PureBasic">; Custom library
;
CompilerIf WINDOWS
  ; Do all the Windows related stuff here
CompilerElse
  CompilerIf LINUX
    ; Do the stuff for linux
  CompilerElse
    ; Default case
  CompilerEndIf
CompilerEndIf</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mmx_3dnow_sse_and_sse2"><a class="anchor" href="#_mmx_3dnow_sse_and_sse2"></a>6. MMX, 3DNow, SSE and SSE2</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since PureBasic 3.60, it&#8217;s possible to creates specialized executables (or dynamic executables) which can use optimized commands for MMX, 3DNOW, SSE and SSE2 processors.
It&#8217;s done at compile time or at runtime, depending of the executable type (Normal or Dynamic CPU).
Implementing an optimized function is very easy: just put <code>_EXTENSION</code> below the name.</p>
</div>
<div class="literalblock">
<div class="title">Example (in C) to support MMX and 3DNOW format</div>
<div class="content">
<pre>PB_CrossFading       (int Rate)  // Base function, working on all processors
PB_CrossFading_MMX   (int Rate)  // MMX optimized
PB_CrossFading_3DNOW (int Rate)  // 3DNOW optimized</pre>
</div>
</div>
<div class="paragraph">
<p>Now, you have to add in the .desc which optimized functions are available.
The following flags are available: <code>MMX</code>, <code>3DNOW</code>, <code>SSE</code> and <code>SSE2</code>.</p>
</div>
<div class="literalblock">
<div class="title">Example for a MMX and 3DNOW optimized function</div>
<div class="content">
<pre>CrossFading, Long, (Rate)
Long | MMX | 3DNOW</pre>
</div>
</div>
<div class="paragraph">
<p>The PureBasic compiler is smart enough to use the base function if no optimized functions are available for the specified CPU.
In dynamic mode, all the functions are included in the final executable and the right one is chosen when the program starts, depending of the CPU on which the executable is run.
It makes of course the executable bigger, but in cases where speed is critical size doesn&#8217;t matter.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing_strings"><a class="anchor" href="#_managing_strings"></a>7. Managing Strings</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Some examples are available in the <code>VisualC</code> subfolder, so be sure to check them, it&#8217;s often easier to learn from working examples.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Managing strings in PureBasic 4.0 and above isn&#8217;t obvious anymore.
If a function use strings but doesn&#8217;t return a string, there are no problems at all.
But when it returns a string, there are two different cases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>The function doesn&#8217;t have string parameters</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>It&#8217;s the easiest one, and you can use the <code>SYS_GetOutputBuffer()</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">char *Output = SYS_GetOutputBuffer(int Length, int PreviousPosition)</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this command you ask PureBasic to return a string buffer of <code>Length</code> (in characters, which means than it&#8217;s the same value in Unicode or not) and store the pointer value in <code>Output</code>.
<code>PreviousPosition</code> is a value passed in the string function.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">Output = SYS_GetOutputBuffer(100, PreviousPosition);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you get this buffer, just write the string result in it and you&#8217;re done.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>Length</code> should be the exact length of the returned string.
It doesn&#8217;t count the null terminating character.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p><strong>The function has some string parameters</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You still have to use the above functions, but before you may need to to call <code>SYS_GetParameterIndex()</code> and <code>SYS_ResolveParameter()</code> if you need to use the string parameters after having called <code>SYS_GetOutputBuffer()</code>.
Why that? Because if one of your parameters is a composed string (like <code>a$+b$</code>), it will reside in the internal buffer.
When you request some length (let&#8217;s say a big length), it can be reallocated, which means than your string pointers won&#8217;t be correct anymore.
<code>SYS_GetParameterIndex()</code> will get the index in the buffer, if the string is in the buffer (or return 0 otherwise).
<code>SYS_ResolveParameter()</code> will rebuild the string pointer once <code>SYS_GetOutputBuffer()</code> will be called.</p>
</div>
<div class="paragraph">
<p>A typical C code will look like that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">M_PBFUNCTION void PB_LSet(const TCHAR *String, int Length, int PreviousPosition)
{
  [...]

  ParameterIndex  = SYS_GetParameterIndex(String);

  Cursor = SYS_GetOutputBuffer(StringLength, PreviousPosition);

  if (ParameterIndex)
    String = SYS_ResolveParameter(ParameterIndex);

  [...]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, sometimes you can&#8217;t know the size of the result string (or it will be too long to compute it).
In such cases, you can request a fixed size and adjust it at the end with the <code>SYS_ReduceStringSize(Length)</code> function.
<code>Length</code> is the number of byte to reduce the buffer.
If you have requested a buffer of 4096 with <code>SYS_GetOutputBuffer()</code> and your string do only 4000 bytes, you will have to reduce it from 96 bytes&#8201;&#8212;&#8201;i.e. <code>SYS_ReduceStringSize(96)</code>.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_splitted_library_format"><a class="anchor" href="#_splitted_library_format"></a>8. Splitted Library Format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since v3.00, PureBasic uses a new type of library: the splitted library.
Each commands should be done in its own file, using the C or ASM <code>extern</code> keyword to access shared variables.
The good point is than only the needed functions are linked to the final executable, which produces much smaller code, in case of only a few commands are used.
Once you have all your .obj in the same directory, you have to change the .DESC 'type' header from OBJ to LIB.
That&#8217;s the only change needed for this file.
Then, you have to create the .lib, based on the .obj files.
To do that, a little tool is provided.</p>
</div>
<div class="literalblock">
<div class="title">Usage</div>
<div class="content">
<pre>polib.exe /OUT:MyKillerLib.lib killer.obj reboot.obj</pre>
</div>
</div>
<div class="paragraph">
<p>A library file will be created, containing all your obj files.
Just launch the LibraryMaker tool, as usual&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_line_options"><a class="anchor" href="#_command_line_options"></a>9. Command-Line Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>LibraryMaker can take several arguments in parameter to allow easy scripting:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>/ALL</code>                 
</td>
<td class="hdlist2">
<p>Process all the .desc files found in the source directory.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/COMPRESSED</code>          
</td>
<td class="hdlist2">
<p>Compress the library (much smaller and faster to load, but slower to build).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/TO &lt;Directory&gt;</code>      
</td>
<td class="hdlist2">
<p>Destination directory.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/CONSTANT MyConstant</code> 
</td>
<td class="hdlist2">
<p>Defines a constant for the preprocessor.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The source directory must be the first argument.</p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>C:\LibraryMaker.exe c:\PureBasicDesc\ /TO C:\PureBasic\PureLibraries\ /ALL /COMPRESSED</pre>
</div>
</div>
<div class="paragraph">
<p>It will convert all the .desc found in the <code>C:\PureBasicDesc\</code> directory and with compression.</p>
</div>
<div class="exampleblock">
<div class="content">
<h3 id="_contributing_and_support" class="discrete">Contributing and Support</h3>
<div class="paragraph">
<p>Feel free to contribute to this document by submitting your own fixes and improvements via <a href="https://git-scm.com/" title="Visit Git&#8217;s website" target="_blank" rel="noopener">Git</a> and creating a pull request on the <a href="https://github.com/fantaisie-software/purebasic" title="Visit the PureBasic Open Source repository on GitHub" target="_blank" rel="noopener"><strong>PureBasic Open Source</strong></a> repository:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/fantaisie-software/purebasic/tree/devel/AsciiDoc/PB-Library-SDK.asciidoc" class="bare" title="View the AsciiDoc source of this document on GitHub" target="_blank" rel="noopener">https://github.com/fantaisie-software/purebasic/tree/devel/AsciiDoc/PB-Library-SDK.asciidoc</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have any questions, remarks or suggestions, just write to: &lt;<a href="mailto:support@purebasic.com">support@purebasic.com</a>&gt;.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>